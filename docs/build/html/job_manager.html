

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>job_manager &mdash; Job Manager 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku-mod.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Job Manager 0.1 documentation" href="index.html" />
    <link rel="next" title="License" href="license.html" />
    <link rel="prev" title="jm.py" href="jm.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Job Manager 0.1 documentation</span></a></h1>
        <h2 class="heading"><span>job_manager</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="jm.html">jm.py</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="license.html">License</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="module-job_manager">
<span id="job-manager"></span><h1>job_manager<a class="headerlink" href="#module-job_manager" title="Permalink to this headline">¶</a></h1>
<p>Calculation manager.</p>
<p>This module provides classes for managing collections of calculations.
For persistant information it is best to interact via a JobCache instance.</p>
<p>Parameters to class constructors are also names of attributes of that class
unless otherwise noted.</p>
<dl class="exception">
<dt id="job_manager.UserError">
<em class="property">exception </em><tt class="descclassname">job_manager.</tt><tt class="descname">UserError</tt><a class="headerlink" href="#job_manager.UserError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.Exception</span></tt></p>
<p>Raised due to an error from user-input.</p>
</dd></dl>

<dl class="exception">
<dt id="job_manager.LockException">
<em class="property">exception </em><tt class="descclassname">job_manager.</tt><tt class="descname">LockException</tt><a class="headerlink" href="#job_manager.LockException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.Exception</span></tt></p>
<p>Raised if a lock cannot be acquired.</p>
</dd></dl>

<dl class="class">
<dt id="job_manager.JobStatus">
<em class="property">class </em><tt class="descclassname">job_manager.</tt><tt class="descname">JobStatus</tt><a class="headerlink" href="#job_manager.JobStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.object</span></tt></p>
<p>enum-esque class for specifying the status of a job.</p>
<p>Defined statuses:</p>
<dl class="attribute">
<dt id="job_manager.JobStatus.unknown">
<tt class="descname">unknown</tt><em class="property"> = 'unknown'</em><a class="headerlink" href="#job_manager.JobStatus.unknown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="job_manager.JobStatus.held">
<tt class="descname">held</tt><em class="property"> = 'held'</em><a class="headerlink" href="#job_manager.JobStatus.held" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="job_manager.JobStatus.queueing">
<tt class="descname">queueing</tt><em class="property"> = 'queueing'</em><a class="headerlink" href="#job_manager.JobStatus.queueing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="job_manager.JobStatus.running">
<tt class="descname">running</tt><em class="property"> = 'running'</em><a class="headerlink" href="#job_manager.JobStatus.running" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="job_manager.JobStatus.finished">
<tt class="descname">finished</tt><em class="property"> = 'finished'</em><a class="headerlink" href="#job_manager.JobStatus.finished" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="job_manager.JobStatus.analysed">
<tt class="descname">analysed</tt><em class="property"> = 'analysed'</em><a class="headerlink" href="#job_manager.JobStatus.analysed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="job_manager.Job">
<em class="property">class </em><tt class="descclassname">job_manager.</tt><tt class="descname">Job</tt><big>(</big><em>job_id</em>, <em>program</em>, <em>path</em>, <em>input_fname=None</em>, <em>output_fname=None</em>, <em>status=None</em>, <em>submit=None</em>, <em>comment=None</em><big>)</big><a class="headerlink" href="#job_manager.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.object</span></tt></p>
<p>Store of information regarding a calculation job.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>job_id</strong> (<em>string or integer</em>) &#8211; job id (e.g. pid or from queueing system)</li>
<li><strong>program</strong> (<em>string</em>) &#8211; program being executed</li>
<li><strong>path</strong> (<em>string</em>) &#8211; path to job directory</li>
<li><strong>input_fname</strong> (<em>string</em>) &#8211; input file name</li>
<li><strong>output_fname</strong> (<em>string</em>) &#8211; output file name</li>
<li><strong>status</strong> (<em>string</em>) &#8211; current status of job.  See <a class="reference internal" href="#job_manager.JobStatus" title="job_manager.JobStatus"><tt class="xref py py-class docutils literal"><span class="pre">JobStatus</span></tt></a> for
defined statuses.  This must be an attribute of <a class="reference internal" href="#job_manager.JobStatus" title="job_manager.JobStatus"><tt class="xref py py-class docutils literal"><span class="pre">JobStatus</span></tt></a>.</li>
<li><strong>submit</strong> (<em>string</em>) &#8211; submit script file name.</li>
<li><strong>comment</strong> (<em>string</em>) &#8211; further information regarding the job.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Only job_id, program and path are required.  All other attributes are optional.
Not all attributes are always applicable.</p>
<dl class="method">
<dt id="job_manager.Job.mtime">
<tt class="descname">mtime</tt><big>(</big><big>)</big><a class="headerlink" href="#job_manager.Job.mtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect the timestamp of the job.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">integer</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the last time (in seconds since the epoch) that the job was modified.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.Job.auto_update">
<tt class="descname">auto_update</tt><big>(</big><big>)</big><a class="headerlink" href="#job_manager.Job.auto_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update job status attribute automatically.</p>
<p>This inspects the output from ps and any queueing system to discover if the
status of the job has changed (e.g. if the job has started or has finished).
Note that this assumes the job is running on the local computer.  Warning: if
this condition is not met, then the job status will be incorrectly updated to
finished.</p>
<p>Currently only aware of the PBS and LoadLeveler queueing systems.</p>
<p>Only jobs which are currently held, queueing or running are updated.</p>
</dd></dl>

<dl class="method">
<dt id="job_manager.Job.modify">
<tt class="descname">modify</tt><big>(</big><em>job_spec</em><big>)</big><a class="headerlink" href="#job_manager.Job.modify" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the job description.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job_spec</strong> (<em>dictionary</em>) &#8211; dictionary with <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> attributes as keys
associated with new values.  All attributes set at initialisation can be
changed.  Keys with null values are ignored.  See output from
<a class="reference internal" href="#job_manager.Job.job_spec" title="job_manager.Job.job_spec"><tt class="xref py py-meth docutils literal"><span class="pre">job_spec()</span></tt></a> for an example format.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.Job.match">
<tt class="descname">match</tt><big>(</big><em>pattern</em><big>)</big><a class="headerlink" href="#job_manager.Job.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Test to see if the job description matches the supplied pattern.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> (<em>string</em>) &#8211; regular expression.  All public attributes of the
<a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> instance are tested (using re.search) against the pattern.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if any attribute matches the pattern.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.Job.job_spec">
<tt class="descname">job_spec</tt><big>(</big><big>)</big><a class="headerlink" href="#job_manager.Job.job_spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect the job.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dictionary</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary (a <em>job spec</em>) of the job attributes.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="job_manager.JobServer">
<em class="property">class </em><tt class="descclassname">job_manager.</tt><tt class="descname">JobServer</tt><big>(</big><em>hostname='localhost'</em><big>)</big><a class="headerlink" href="#job_manager.JobServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.object</span></tt></p>
<p>Store set of <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> instances running on a server/computer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hostname</strong> (<em>string</em>) &#8211; name of computer running the jobs.  Default: localhost.
localhost is treated as a special case and is assumed to be the computer on
which this instance of <a class="reference internal" href="#module-job_manager" title="job_manager"><tt class="xref py py-mod docutils literal"><span class="pre">job_manager</span></tt></a> is running.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="job_manager.JobServer.jobs">
<tt class="descname">jobs</tt><a class="headerlink" href="#job_manager.JobServer.jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>list of <tt class="xref py py-class docutils literal"><span class="pre">Jobs</span></tt> running on the server.</p>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobServer.add">
<tt class="descname">add</tt><big>(</big><em>job_spec</em><big>)</big><a class="headerlink" href="#job_manager.JobServer.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> to the list of jobs running on the server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job_spec</strong> (<em>dictionary</em>) &#8211; job to be added.  See <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> and <a class="reference internal" href="#job_manager.Job.job_spec" title="job_manager.Job.job_spec"><tt class="xref py py-meth docutils literal"><span class="pre">Job.job_spec()</span></tt></a>
for possible fields and format.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobServer.auto_update">
<tt class="descname">auto_update</tt><big>(</big><big>)</big><a class="headerlink" href="#job_manager.JobServer.auto_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically update the job status of all <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a>.</p>
<p>Only performed on the localhost <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a>.  See also <a class="reference internal" href="#job_manager.Job.auto_update" title="job_manager.Job.auto_update"><tt class="xref py py-meth docutils literal"><span class="pre">Job.auto_update()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobServer.select">
<tt class="descname">select</tt><big>(</big><em>pattern</em><big>)</big><a class="headerlink" href="#job_manager.JobServer.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a subset of jobs from the server which match the supplied pattern.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> (<em>string</em>) &#8211; regular expression.  All <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> are tested (using <a class="reference internal" href="#job_manager.Job.match" title="job_manager.Job.match"><tt class="xref py py-meth docutils literal"><span class="pre">Job.match()</span></tt></a>)
against the pattern and the list of matching jobs is returned.  If pattern is
None then all jobs are returned.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobServer.delete">
<tt class="descname">delete</tt><big>(</big><em>indices=None</em>, <em>pattern=None</em><big>)</big><a class="headerlink" href="#job_manager.JobServer.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a selected subset of <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>indices</strong> (<em>iterable of integers</em>) &#8211; indices of <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> instances in the <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> list to
delete.  Not used if None or empty.</li>
<li><strong>pattern</strong> (<em>string</em>) &#8211; regular expression.  The <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> are which match
the pattern (found using <a class="reference internal" href="#job_manager.JobServer.select" title="job_manager.JobServer.select"><tt class="xref py py-meth docutils literal"><span class="pre">select()</span></tt></a>) are deleted.  Not used if None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobServer.modify">
<tt class="descname">modify</tt><big>(</big><em>job_spec</em>, <em>indices=None</em>, <em>pattern=None</em><big>)</big><a class="headerlink" href="#job_manager.JobServer.modify" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify a selected subset of <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> using <a class="reference internal" href="#job_manager.Job.modify" title="job_manager.Job.modify"><tt class="xref py py-meth docutils literal"><span class="pre">Job.modify()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>job_spec</strong> (<em>dictionary</em>) &#8211; fields of job to be modified.  See <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> and
<a class="reference internal" href="#job_manager.Job.job_spec" title="job_manager.Job.job_spec"><tt class="xref py py-meth docutils literal"><span class="pre">Job.job_spec()</span></tt></a> for possible fields and format.</li>
<li><strong>indices</strong> (<em>iterable of integers</em>) &#8211; indices of <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> instances in the <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> list to
modify.  Not used if None or empty.</li>
<li><strong>pattern</strong> (<em>string</em>) &#8211; regular expression.  The <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> are which match
the pattern (found using <a class="reference internal" href="#job_manager.JobServer.select" title="job_manager.JobServer.select"><tt class="xref py py-meth docutils literal"><span class="pre">select()</span></tt></a>) are modified.  Not used if None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobServer.merge">
<tt class="descname">merge</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#job_manager.JobServer.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> from another <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a>.</p>
<p>If a <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> in the other <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> has the same job_id as
a <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> in <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a> and has a later modification time, then it is
copied across.  If a job in the other <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> does not have the same
job_id as any <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> in <a class="reference internal" href="#job_manager.JobServer.jobs" title="job_manager.JobServer.jobs"><tt class="xref py py-attr docutils literal"><span class="pre">jobs</span></tt></a>, then it is copied across.</p>
<p>Note that the hostname of the other <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> is not checked.</p>
<p>The job_id of the <a class="reference internal" href="#job_manager.Job" title="job_manager.Job"><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt></a> instance is treated as a unique identifier.
This is usually true on a given queueing system but is not guaranteed with
running local jobs (where the job_id is taken from ps).  Care should thus be
taken when merging jobs from a localhost <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> and from merging
jobs from two different :class`JobServer` instances (which should instead be
grouped together using a <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a> instance).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>other</strong> (<a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a>) &#8211; another instance of <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="job_manager.JobCache">
<em class="property">class </em><tt class="descclassname">job_manager.</tt><tt class="descname">JobCache</tt><big>(</big><em>cache</em>, <em>load=False</em><big>)</big><a class="headerlink" href="#job_manager.JobCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.object</span></tt></p>
<p>Store, manipulate, load and save multiple <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> instances.</p>
<p>By default a new (empty) <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> instance is created on localhost.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cache</strong> (<em>string</em>) &#8211; path to a file in which the job data can be stored and
retrieved.  Only one instance can manipulate job data stored in a cache at
a time, so a lock is acquired when a cache is read and released only when the
cache dumped out to the cache.  The directory for the cache file is created if
it doesn&#8217;t already exist.</li>
<li><strong>load</strong> (<em>boolean</em>) &#8211; load data from an existing cache file if true.  Not an attribute.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="job_manager.JobCache.job_servers">
<tt class="descname">job_servers</tt><a class="headerlink" href="#job_manager.JobCache.job_servers" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> instances.</p>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobCache.dump">
<tt class="descname">dump</tt><big>(</big><big>)</big><a class="headerlink" href="#job_manager.JobCache.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump job_servers data to the cache file.</p>
<p>Also releases the lock and resets the job_servers to be an empty JobServer
instance on the localhost.</p>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobCache.load">
<tt class="descname">load</tt><big>(</big><big>)</big><a class="headerlink" href="#job_manager.JobCache.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in the job_servers data from the cache file.</p>
<p>Also acquires the lock.</p>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobCache.add_server">
<tt class="descname">add_server</tt><big>(</big><em>hostname</em><big>)</big><a class="headerlink" href="#job_manager.JobCache.add_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hostname</strong> (<em>string</em>) &#8211; name of server.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobCache.auto_update">
<tt class="descname">auto_update</tt><big>(</big><big>)</big><a class="headerlink" href="#job_manager.JobCache.auto_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Auto-update the status of the jobs on the localhost <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a>.</p>
<p>See also <a class="reference internal" href="#job_manager.JobServer.auto_update" title="job_manager.JobServer.auto_update"><tt class="xref py py-meth docutils literal"><span class="pre">JobServer.auto_update()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobCache.merge">
<tt class="descname">merge</tt><big>(</big><em>other</em>, <em>other_hostname</em><big>)</big><a class="headerlink" href="#job_manager.JobCache.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge data from another <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a>.</p>
<p>Each <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> in other <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a> is merged with the
corresponding <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> in the current instance.  <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a>
instances are matched by the hostname. If a <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a> exists in the
other <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a> and in the current instance, then they are merged using
<a class="reference internal" href="#job_manager.JobServer.merge" title="job_manager.JobServer.merge"><tt class="xref py py-meth docutils literal"><span class="pre">JobServer.merge()</span></tt></a>, otherwise it is simply copied to the current instance.
Note that the localhost hostname of the other <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a> is replaced
with other_hostname to avoid unintended nameclashes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>other</strong> (<a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a>) &#8211; another instance of <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a>.</li>
<li><strong>other_hostname</strong> (<em>string</em>) &#8211; hostname of the other <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a>.  Used
instead of localhost when transferring the localhost <a class="reference internal" href="#job_manager.JobServer" title="job_manager.JobServer"><tt class="xref py py-class docutils literal"><span class="pre">JobServer</span></tt></a>
from the other <a class="reference internal" href="#job_manager.JobCache" title="job_manager.JobCache"><tt class="xref py py-class docutils literal"><span class="pre">JobCache</span></tt></a> to the current instance.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="job_manager.JobCache.pretty_print">
<tt class="descname">pretty_print</tt><big>(</big><em>hosts=None</em>, <em>pattern=None</em>, <em>short=False</em><big>)</big><a class="headerlink" href="#job_manager.JobCache.pretty_print" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out <a class="reference internal" href="#job_manager.JobCache.job_servers" title="job_manager.JobCache.job_servers"><tt class="xref py py-attr docutils literal"><span class="pre">job_servers</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hosts</strong> (<em>list of strings</em>) &#8211; list of hostnames.  If specified, print out only jobs on the
specified servers.</li>
<li><strong>pattern</strong> (<em>string</em>) &#8211; regular expression.  Only jobs which match the supplied
pattern are printed.  If pattern is None then all jobs are printed.</li>
<li><strong>short</strong> (<em>boolean</em>) &#8211; print just the hostname, index, job_id and status.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="jm.html">jm.py</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="license.html">License</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, James Spencer.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>